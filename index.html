<!DOCTYPE html>
<html>

<head>

<title>KAALI AI</title>

<style>

body{
background:black;
color:white;
font-family:Arial;
text-align:center;
margin:0;
}


/* LOGO */

.logo{
width:130px;
margin-top:30px;
animation:glow 3s infinite;
}


/* TITLE */

h1{
color:gold;
font-size:50px;
margin-bottom:10px;
}


/* CHAT BOX */

.chatbox{

background:#111;

width:650px;

margin:auto;

padding:30px;

border-radius:20px;

box-shadow:0px 0px 40px rgba(255,215,0,0.5);

}


/* INPUT */

input{

width:70%;

padding:15px;

border-radius:10px;

border:none;

font-size:18px;

outline:none;

}


/* BUTTON */

button{

background:gold;

border:none;

padding:15px 25px;

border-radius:10px;

font-size:18px;

cursor:pointer;

font-weight:bold;

transition:0.3s;

}


button:hover{

background:#ffd700cc;

}


/* MESSAGE AREA */

#messages{

margin-top:20px;

text-align:left;

height:350px;

overflow:auto;

padding-right:10px;

}



/* MESSAGE BUBBLES */

.user{

background:#222;

padding:10px;

border-radius:10px;

margin:8px;

animation:fadeIn 0.4s ease;

}


.kaali{

background:#000;

border-left:4px solid gold;

padding:10px;

border-radius:10px;

margin:8px;

animation:fadeIn 0.6s ease;

}



/* FADE ANIMATION */

@keyframes fadeIn{

from{
opacity:0;
transform:translateY(10px);
}

to{
opacity:1;
transform:translateY(0);
}

}


/* GLOW ANIMATION */

@keyframes glow{

0%{filter:drop-shadow(0px 0px 2px gold);}
50%{filter:drop-shadow(0px 0px 15px gold);}
100%{filter:drop-shadow(0px 0px 2px gold);}

}


/* TYPING ANIMATION */

.typing{

color:gold;

font-style:italic;

animation:pulse 1s infinite;

}

@keyframes pulse{

0%{opacity:0.3}
50%{opacity:1}
100%{opacity:0.3}

}


</style>

</head>



<body>


<img src="kaali.png" class="logo">

<h1>KAALI AI</h1>


<div class="chatbox">


<input id="input" placeholder="Ask KAALI anything...">

<button onclick="send()">Send</button>


<div id="messages"></div>


</div>




<script>


// ==========================
// CONVERSATION MEMORY
// ==========================

let history=[];

let started=false;




// ==========================
// SEND MESSAGE
// ==========================

async function send(){

let input=document.getElementById("input");

let msg=input.value.trim();

if(!msg) return;

input.value="";



// Show User Message

document.getElementById("messages").innerHTML+=

"<div class='user'><b>You:</b> "+msg+"</div>";



// First Message Logic

if(!started){

history.push({

role:"assistant",

content:"âœ¨ Namaste! I am KAALI, your mystical guide at DEJOIY. How may I assist you today?"

});

started=true;

}



// Save User Message

history.push({

role:"user",

content:msg

});




// Typing Animation

document.getElementById("messages").innerHTML+=

"<div class='kaali typing'>KAALI is thinking... ðŸ”®</div>";



let res=await fetch("/api/chat",{

method:"POST",

headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({

messages:history

})

});


let data=await res.json();



// Remove typing animation

let messagesDiv=document.getElementById("messages");

messagesDiv.removeChild(messagesDiv.lastChild);



// Save Reply

history.push({

role:"assistant",

content:data.reply

});



// Show Reply

messagesDiv.innerHTML+=

"<div class='kaali'><b>KAALI:</b> "+data.reply+"</div>";




// Auto Scroll

messagesDiv.scrollTop=messagesDiv.scrollHeight;

}




// ==========================
// ENTER KEY SUPPORT
// ==========================

document.getElementById("input")

.addEventListener("keydown",function(e){

if(e.key==="Enter"){

send();

}

});



</script>


</body>

</html>
